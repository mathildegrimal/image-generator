/*!
 * MIT License
 * 
 * Copyright (c) 2021 Yoav Niran
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.rpldy=t(require("react"),require("react-dom")):e.rpldy=t(e.react,e["react-dom"])}(window,(function(e,t){return function(e){function t(t){for(var r,i,s=t[0],u=t[1],c=t[2],l=0,p=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(d&&d(t);p.length;)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={uiCore:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonprpldy=window.webpackJsonprpldy||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=u;return a.push([0,"polyfills"]),n()}({0:function(e,t,n){n("Xsbf"),n("mHo/"),n("GjXi"),n("SXZu"),n("h0aC"),e.exports=n("lFlW")},DVTP:function(e,t){e.exports=function(){return!0}},GjXi:function(e,t,n){"use strict";n.r(t),n.d(t,"send",(function(){return f})),n.d(t,"getXhrSend",(function(){return p})),n.d(t,"XHR_SENDER_TYPE",(function(){return o})),n.d(t,"MissingUrlError",(function(){return a}));var r=n("mHo/");const o="rpldy-sender";class a extends Error{constructor(e){super(e+" didn't receive upload URL"),this.name="MissingUrlError"}}const i=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];"set"in e?e.set(t,...r):("delete"in e&&e.delete(t),e.append(t,...r))};var s=(e,t)=>{const n=new FormData;return t.params&&Object.entries(t.params).forEach(e=>{let[r,o]=e;(t.formDataAllowUndefined||void 0!==o)&&i(n,r,o)}),((e,t,n)=>{const o=1===t.length;t.forEach((t,a)=>{const s=o?n.paramName:Object(r.isFunction)(n.formatGroupParamName)?n.formatGroupParamName(a,n.paramName):`${n.paramName}[${a}]`;t.file?i(e,s,t.file,t.file.name):t.url&&i(e,s,t.url)})})(n,e,t),n};const u=[200,201,202,203,204],c=(e,t,n,o,a)=>{let i;const u=null!=a&&a.getRequestData?a.getRequestData(e,n):((e,t)=>{let n;if(t.sendWithFormData)r.logger.debugLog(`uploady.sender: sending ${e.length} item(s) as form data`),n=s(e,t);else{if(e.length>1)throw new Error("XHR Sender - Request without form data can only contain 1 item. received "+e.length);const t=e[0];r.logger.debugLog(`uploady.sender: sending item ${t.id} as request body`),n=t.file||t.url}return n})(e,n),c=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,c=arguments.length>2?arguments[2]:void 0;c=Object(r.merge)({...Object(r.pick)(n,["method","headers","withCredentials"]),preSend:t=>{t.upload.onprogress=t=>{t.lengthComputable&&o&&o(t,e.slice())}}},c);const d=Object(r.request)(a,s,c);return i=d.xhr,d},d=null!=a&&a.preRequestHandler?a.preRequestHandler(c,e,t,n,o,a):c();return{url:t,count:e.length,pXhr:d,getXhr:()=>i,aborted:!1}},d=(e,t,n)=>{let r=e;const o=null==t?void 0:t["content-type"];if(n.forceJsonResponse||null!=o&&o.includes("json"))try{r=JSON.parse(e)}catch{}return r},l=(e,t)=>e.pXhr.then(e=>{var n,o;let a,i,s;r.logger.debugLog("uploady.sender: received upload response ",e),a=~u.indexOf(e.status)?r.FILE_STATES.FINISHED:r.FILE_STATES.ERROR,s=e.status;const c=Object(r.parseResponseHeaders)(e);return i={data:null!==(n=null===(o=t.formatServerResponse)||void 0===o?void 0:o.call(t,e.response,s,c))&&void 0!==n?n:d(e.response,c,t),headers:c},{status:s,state:a,response:i}}).catch(t=>{let n,o;return e.aborted?(n=r.FILE_STATES.ABORTED,o="aborted"):(r.logger.debugLog("uploady.sender: upload failed: ",t),n=r.FILE_STATES.ERROR,o=t),{error:!0,state:n,response:o,status:0}});var p=e=>(t,n,i,s)=>{if(!n)throw new a(o);r.logger.debugLog("uploady.sender: sending file: ",{items:t,url:n,options:i});const u=c(t,n,i,s,e);return{request:l(u,i),abort:()=>(e=>{let t=!1;const{aborted:n,getXhr:o}=e,a=o();return!n&&a&&a.readyState&&4!==a.readyState&&(r.logger.debugLog(`uploady.sender: cancelling request with ${e.count} items to: ${e.url}`),a.abort(),e.aborted=!0,t=!0),t})(u),senderType:o}};const f=p();t.default=f},Lrr1:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n("mHo/");const o=Symbol.for("_rpldy-version_"),a=()=>"0.17.2",i=()=>(Object(r.hasWindow)()?window:e)[o],s=()=>{(Object(r.hasWindow)()?window:e)[o]=a()},u=()=>{const e=i();return!!e&&e!==a()}}).call(this,n("8oxB"))},SXZu:function(e,t,n){"use strict";n.r(t),n.d(t,"UPLOADER_EVENTS",(function(){return E})),n.d(t,"DEFAULT_OPTIONS",(function(){return ee})),n.d(t,"composeEnhancers",(function(){return le})),n.d(t,"createUploader",(function(){return de})),n.d(t,"send",(function(){return Y.send})),n.d(t,"getXhrSend",(function(){return Y.getXhrSend})),n.d(t,"XHR_SENDER_TYPE",(function(){return Y.XHR_SENDER_TYPE})),n.d(t,"MissingUrlError",(function(){return Y.MissingUrlError})),n.d(t,"FILE_STATES",(function(){return o.FILE_STATES})),n.d(t,"BATCH_STATES",(function(){return o.BATCH_STATES}));var r=n("Xsbf"),o=n("mHo/");const a=Symbol.for("__rpldy-sstt-proxy__"),i=Symbol.for("__rpldy-sstt-state__"),s=e=>!Object(o.isProduction)()&&!!e&&!!~Object.getOwnPropertySymbols(e).indexOf(a),u=e=>Array.isArray(e)||Object(o.isPlainObject)(e)&&!(e=>Object(o.hasWindow)()&&e instanceof File||e.name&&e.size&&e.uri)(e),c=Object(o.getMerge)({withSymbols:!0,predicate:e=>e!==a&&e!==i}),d=e=>!!Object(o.isProduction)()||e[i].isUpdateable,l=(e,t)=>{Object(o.isProduction)()||(e[i].isUpdateable=t)},p=(e,t)=>{let n;return u(e)&&(s(e)||(e[a]=!0,n=new Proxy(e,t)),Object.keys(e).forEach(n=>{e[n]=p(e[n],t)})),n||e},f=e=>s(e)?Object(o.clone)(e,c):e;var g=e=>{const t={set:(e,r,o)=>(d(n)&&(e[r]=p(o,t)),!0),get:(e,t)=>t===a?f(e):e[t],defineProperty:()=>{throw new Error("Simple State doesnt support defining property")},setPrototypeOf:()=>{throw new Error("Simple State doesnt support setting prototype")},deleteProperty:(e,t)=>(d(n)&&delete e[t],!0)};Object(o.isProduction)()||s(e)||Object.defineProperty(e,i,{value:{isUpdateable:!1},configurable:!0});const n=Object(o.isProduction)()?e:p(e,t);return{state:n,update:e=>{if(!Object(o.isProduction)()&&d(n))throw new Error("Can't call update on State already being updated!");try{l(n,!0),e(n)}finally{l(n,!1)}return n},unwrap:e=>e?f(e):s(n)?f(n):n}};const E=Object(o.devFreeze)({BATCH_ADD:"BATCH-ADD",BATCH_START:"BATCH-START",BATCH_PROGRESS:"BATCH_PROGRESS",BATCH_FINISH:"BATCH-FINISH",BATCH_ABORT:"BATCH-ABORT",BATCH_CANCEL:"BATCH-CANCEL",BATCH_ERROR:"BATCH-ERROR",BATCH_FINALIZE:"BATCH-FINALIZE",ITEM_START:"FILE-START",ITEM_CANCEL:"FILE-CANCEL",ITEM_PROGRESS:"FILE-PROGRESS",ITEM_FINISH:"FILE-FINISH",ITEM_ABORT:"FILE-ABORT",ITEM_ERROR:"FILE-ERROR",ITEM_FINALIZE:"FILE-FINALIZE",REQUEST_PRE_SEND:"REQUEST_PRE_SEND",ALL_ABORT:"ALL_ABORT"}),h=Object(o.devFreeze)({ITEM_PROGRESS:"ITEM_PROGRESS",BATCH_PROGRESS:"BATCH_PROGRESS"}),b=[o.FILE_STATES.FINISHED,o.FILE_STATES.ERROR,o.FILE_STATES.CANCELLED,o.FILE_STATES.ABORTED],S=Object(o.getMerge)({undefinedOverwrites:!0}),m=(e,t,n,r,a,i)=>Object(o.triggerUpdater)(e.trigger,a,t,r).then(e=>(null==i||i(e),((e,t,n,r)=>{if(r){if(o.logger.debugLog(`uploader.queue: REQUEST_PRE_SEND(${e}) event returned updated items/options`,r),r.items){if(r.items.length!==t.length||!Object(o.isSamePropInArrays)(r.items,t,["id","batchId","recycled"]))throw new Error(`REQUEST_PRE_SEND(${e}) event handlers must return same items with same ids`);t=r.items}r.options&&(n=S({},n,r.options))}return{items:t,options:n,cancelled:!1===r}})(a,n,r,e))),A=(e,t,n,r,o,a)=>{const i=n(t),s=e.getState().batches[i[0].batchId].batchOptions,u=(null==r?void 0:r(t,s))||t;return m(e,u,i,s,a,o).then(t=>(t.cancelled||((e,t)=>{e.updateState(e=>{t.items.forEach(t=>{e.items[t.id]=t}),e.batches[t.items[0].batchId].batchOptions=t.options});const n=e.getState();t.items=t.items.map(e=>n.items[e.id]),t.options=n.batches[t.items[0].batchId].batchOptions})(e,t),t))},T=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(o,a)=>A(o,a,t,n,r,e)},O=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.getState(),o=r.itemQueue.indexOf(t);~o&&e.updateState(e=>{n&&delete e.items[t],e.itemQueue.splice(o,1);const r=e.activeIds.indexOf(t);~r&&e.activeIds.splice(r,1)})},v=(e,t,n)=>e.getState().items[t].batchId===n,y=T(E.BATCH_START,e=>e.items,null,(function(){let{batch:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e)throw new Error("BATCH_START event handlers cannot update batch data. Only items & options")})),R=[o.BATCH_STATES.ADDED,o.BATCH_STATES.PROCESSING,o.BATCH_STATES.UPLOADING],I=[o.BATCH_STATES.ABORTED,o.BATCH_STATES.CANCELLED,o.BATCH_STATES.FINISHED,o.BATCH_STATES.ERROR],_=(e,t)=>e.batches[t].batch,L=(e,t)=>{const n=e.getState(),r=n.items[t];return n.batches[r.batchId]},C=(e,t)=>L(e,t).batch,P=(e,t)=>{((e,t)=>_(e.getState(),t))(e,t).items.forEach(t=>{let{id:n}=t;return O(e,n,!0)})},B=(e,t)=>{e.updateState(e=>{delete e.batches[t]})},D=(e,t,n)=>{w(e,t,n),w(e,t,E.BATCH_FINALIZE)},w=(e,t,n)=>{const r=e.getState(),o=_(r,t),a=r.items,i={...f(o),items:o.items.map(e=>{let{id:t}=e;return f(a[t])})};e.trigger(n,i)},j=(e,t)=>{const n=C(e,t);return R.includes(n.state)},U=e=>I.includes(e.state),N={[o.FILE_STATES.PENDING]:null,[o.FILE_STATES.ADDED]:E.ITEM_START,[o.FILE_STATES.FINISHED]:E.ITEM_FINISH,[o.FILE_STATES.ERROR]:E.ITEM_ERROR,[o.FILE_STATES.CANCELLED]:E.ITEM_CANCEL,[o.FILE_STATES.ABORTED]:E.ITEM_ABORT,[o.FILE_STATES.UPLOADING]:E.ITEM_PROGRESS},F=e=>!!~b.indexOf(e.state);var H=(e,t,n)=>{t.forEach(t=>{const n=e.getState(),{id:r,info:a}=t;if(o.logger.debugLog("uploader.processor.queue: request finished for item - ",{id:r,info:a}),n.items[r]){e.updateState(e=>{const t=e.items[r];t.state=a.state,t.uploadResponse=a.response,t.uploadStatus=a.status,F(t)&&delete e.aborts[r]});const t=e.getState().items[r];a.state===o.FILE_STATES.FINISHED&&t.completed<100&&e.handleItemProgress(t,100,t.file?t.file.size:0),N[t.state]&&e.trigger(N[t.state],t),F(t)&&(((e,t)=>{e.updateState(e=>{e.batches[t].finishedCounter+=1})})(e,t.batchId),e.trigger(E.ITEM_FINALIZE,t))}O(e,r)}),(e=>{const t=e.getState();Object.keys(t.batches).forEach(n=>{const{batch:r,finishedCounter:a}=t.batches[n],{orgItemCount:i}=r,s=U(r);i===a&&(s||100===r.completed||(e.updateState(e=>{const t=_(e,n);t.completed=100,t.loaded=t.items.reduce((e,t)=>{let{loaded:n}=t;return e+n},0)}),w(e,n,E.BATCH_PROGRESS)),e.updateState(e=>{const t=_(e,n);t.state=s?t.state:o.BATCH_STATES.FINISHED,e.currentBatch===n&&(e.currentBatch=null)}),o.logger.debugLog("uploady.uploader.batchHelpers: cleaning up batch: "+r.id),s||D(e,n,E.BATCH_FINISH),P(e,n),B(e,n))})})(e),n(e)};const x=T(E.REQUEST_PRE_SEND,e=>e,(e,t)=>({items:e,options:t})),q=(e,t,n)=>{const{items:r,options:a}=t,i=e.getState().batches[r[0].batchId].batch;let s;try{s=e.sender.send(r,i,a)}catch(e){o.logger.debugLog("uploader.queue: sender failed with unexpected error",e),s={request:Promise.resolve({status:0,state:o.FILE_STATES.ERROR,response:e.message}),abort:()=>!1,senderType:"exception-handler"}}const{request:u}=s;return((e,t,n)=>{e.updateState(e=>{t.forEach(t=>{e.items[t.id].state=o.FILE_STATES.UPLOADING,e.aborts[t.id]=n.abort})})})(e,r,s),u.then(t=>{const o=r.map(e=>({id:e.id,info:t}));H(e,o,n)})},M=e=>{let{allowedItems:t,cancelledResults:n,queue:r,items:a,ids:i,next:s}=e;return(t.length?x(r,t):Promise.resolve()).catch(e=>{o.logger.debugLog("uploader.queue: encountered error while preparing items for request",e),((e,t,n,r)=>{const a=n.map(t=>{let{id:n}=t;return{id:n,info:{status:0,state:o.FILE_STATES.ERROR,response:e}}});H(t,a,r)})(e,r,a,s)}).then(e=>{let t;return e&&(e.cancelled?n=i.map(()=>!0):q(r,{items:e.items,options:e.options},s)),((e,t,n,r)=>{const a=n.map((e,n)=>e?t[n].id:null).filter(Boolean);if(a.length){const t=a.map(e=>({id:e,info:{status:0,state:o.FILE_STATES.CANCELLED,response:"cancel"}}));H(e,t,r)}return!!a.length})(r,a,n,s)||(t=s(r)),t})};var G=(e,t,n)=>{const r=e.getState();let o=Object.values(r.items);return o=o.filter(e=>!!~t.indexOf(e.id)),Promise.all(o.map(t=>e.runCancellable(E.ITEM_START,t))).then(r=>({allowedItems:r.map((t,n)=>t?null:((e,t)=>{const n=t.getState().items[e];return n&&!b.includes(n.state)?n:void 0})(o[n].id,e)).filter(Boolean),cancelledResults:r,queue:e,items:o,ids:t,next:n})).then(M)};const k=(e,t)=>e.getState().activeIds.flat().includes(t),V=e=>{const t=e.getState().itemQueue,n=(e=>{const t=e.getState(),n=t.itemQueue,r=t.items;let a=0,i=n[a];for(;i&&(k(e,i)||!j(e,i)||r[i].state!==o.FILE_STATES.ADDED);)a+=1,i=n[a];return i?a:-1})(e);let r,a=t[n];if(a){const o=L(e,a),i=o.batch.id,s=o.batchOptions.maxGroupSize||0;if(o.batchOptions.grouped&&s>1){r=[];let o=!0;for(;r.length<s&&o;)r.push(a),a=t[n+r.length],o=a&&v(e,a,i)}else r=[a]}return r},$=(e,t)=>{let n;return((e,t)=>{e.updateState(e=>{e.activeIds=e.activeIds.concat(t)})})(e,t),n=((e,t)=>{const n=C(e,t);return e.getState().currentBatch!==n.id})(e,t[0])?((e,t)=>{const n=C(e,t);return y(e,n).then(t=>{let{cancelled:r}=t;return r||e.updateState(e=>{e.currentBatch=n.id}),!r})})(e,t[0]).then(n=>{let r=!n;return r&&(((e,t)=>{const n=C(e,t),r=n.id;o.logger.debugLog("uploady.uploader.batchHelpers: cancelling batch: ",{batch:n}),e.updateState(e=>{_(e,r).state=o.BATCH_STATES.CANCELLED}),D(e,r,E.BATCH_CANCEL),P(e,r),B(e,r)})(e,t[0]),X(e)),r}).catch(n=>(o.logger.debugLog("uploader.processor: encountered error while preparing batch for request",n),((e,t,n)=>{const r=C(e,t),a=r.id;o.logger.debugLog("uploady.uploader.batchHelpers: failing batch: ",{batch:r}),e.updateState(e=>{const t=_(e,a);t.state=o.BATCH_STATES.ERROR,t.additionalInfo=n.message}),D(e,a,E.BATCH_ERROR),P(e,a),B(e,a)})(e,t[0],n),X(e),!0)):Promise.resolve(!1),n},X=e=>{let t;const n=V(e);if(n){const r=e.getCurrentActiveCount(),{concurrent:a=0,maxConcurrent:i=0}=e.getOptions();(!r||a&&r<i)&&(o.logger.debugLog("uploader.processor: Processing next upload - ",{ids:n,currentCount:r}),t=$(e,n).then(t=>{t||(G(e,n,X),a&&X(e))}))}return t};var W=X;const z=(e,t,n)=>(o.logger.debugLog(`uploader.queue: aborting ${t.state} item  - `,t),H(e,[{id:t.id,info:{status:0,state:o.FILE_STATES.ABORTED,response:"aborted"}}],n),!0),Q={[o.FILE_STATES.UPLOADING]:(e,t)=>(o.logger.debugLog("uploader.queue: aborting uploading item  - ",t),e.getState().aborts[t.id]()),[o.FILE_STATES.ADDED]:z,[o.FILE_STATES.PENDING]:z},Z=(e,t,n)=>{const r=e.getState().items[t],o=null==r?void 0:r.state;return!!Q[o]&&Q[o](e,r,n)};var J=(e,t,n,r,a)=>{const{state:i,update:s}=g({itemQueue:[],currentBatch:null,batches:{},items:{},activeIds:[],aborts:{}}),u=()=>i,c=e=>{s(e)},d=e=>{if(i.items[e.id]&&!e.recycled)throw new Error(`Uploader queue conflict - item ${e.id} already exists`);e.recycled&&((e,t)=>{const{previousBatch:n}=t;if(t.recycled&&n&&e.getState().batches[n]){const{id:r}=C(e,t.id);r===n&&e.updateState(e=>{const n=_(e,r),o=n.items.findIndex(e=>{let{id:n}=e;return n===t.id});~o&&n.items.splice(o,1)})}})(p,e),c(t=>{t.items[e.id]=e,t.itemQueue.push(e.id)})},l=(e,n,r)=>{i.items[e.id]&&(c(t=>{const o=t.items[e.id];o.loaded=r,o.completed=n}),t(E.ITEM_PROGRESS,u().items[e.id]))};r.on(h.ITEM_PROGRESS,l),r.on(h.BATCH_PROGRESS,e=>{var n;const r=null===(n=i.batches[e.id])||void 0===n?void 0:n.batch.items;if(r){const[n,o]=r.reduce((e,t)=>{let{id:n}=t;const{completed:r,loaded:o}=i.items[n];return e[0]+=r,e[1]+=o,e},[0,0]);c(t=>{const a=t.batches[e.id].batch;a.completed=n/r.length,a.loaded=o}),t(E.BATCH_PROGRESS,i.batches[e.id].batch)}});const p={uploaderId:a,getOptions:()=>e,getCurrentActiveCount:()=>i.activeIds.length,getState:u,updateState:c,trigger:t,runCancellable:function(e){if(!Object(o.isFunction)(n))throw new Error("Uploader queue - cancellable is of wrong type");for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return n(e,...r)},sender:r,handleItemProgress:l};return Object(o.hasWindow)()&&o.logger.isDebugOn()&&(window[`__rpldy_${a}_queue_state`]=p),{updateState:c,getState:p.getState,runCancellable:p.runCancellable,uploadBatch:(e,t)=>{t&&c(n=>{n.batches[e.id].batchOptions=t}),W(p)},addBatch:(e,t)=>(c(n=>{n.batches[e.id]={batch:e,batchOptions:t,finishedCounter:0}}),e.items.forEach(d),_(i,e.id)),abortItem:e=>((e,t,n)=>Z(e,t,n))(p,e,W),abortBatch:e=>{((e,t,n)=>{const r=e.getState().batches[t],a=null==r?void 0:r.batch;a&&!U(a)&&(e.updateState(e=>{_(e,t).state=o.BATCH_STATES.ABORTED}),w(e,t,E.BATCH_ABORT),a.items.forEach(t=>Z(e,t.id,n)))})(p,e,W)},abortAll:()=>{((e,t)=>{const n=e.getState().items;Object.keys(n).forEach(n=>Z(e,n,t)),e.trigger(E.ALL_ABORT)})(p,W)},clearPendingBatches:()=>{(e=>{const t=e.getState().batches;Object.keys(t).filter(e=>t[e].batch.state===o.BATCH_STATES.PENDING).forEach(t=>{P(e,t),B(e,t)})})(p)},uploadPendingBatches:e=>{((e,t)=>{e.updateState(e=>{Object.keys(e.batches).forEach(n=>{const r=e.batches[n],{batch:a,batchOptions:i}=r;a.state===o.BATCH_STATES.PENDING&&(a.items.forEach(e=>{e.state=o.FILE_STATES.ADDED}),a.state=o.BATCH_STATES.ADDED,r.batchOptions=Object(o.merge)({},i,t))})})})(p,e),W(p)}}},Y=n("GjXi");const K=()=>!0,ee=Object(o.devFreeze)({autoUpload:!0,clearPendingOnAdd:!1,inputFieldName:"file",concurrent:!1,maxConcurrent:2,grouped:!1,maxGroupSize:5,method:"POST",params:{},fileFilter:K,forceJsonResponse:!1,withCredentials:!1,destination:{},send:null,sendWithFormData:!0,formDataAllowUndefined:!1}),te=(e,t,n,r)=>{((e,t,n,r)=>{e.forEach(e=>{o.logger.debugLog(`uploady.uploader.processor: file: ${e.id} progress event: loaded(${n}) - completed(${t})`),r(h.ITEM_PROGRESS,e,t,n)})})(e,Math.min(n.loaded/n.total*100,100)/e.length,n.loaded/e.length,r),r(h.BATCH_PROGRESS,t)};var ne=()=>{const{trigger:e,target:t}=Object(r.default)({send:(t,n,r)=>{const a=r.destination,i=null==a?void 0:a.url,s=Object(o.throttle)(r=>te(t,n,r,e),50,!0);return(Object(o.isFunction)(r.send)?r.send:Y.default)(t,i,{method:(null==a?void 0:a.method)||r.method||ee.method,paramName:(null==a?void 0:a.filesParamName)||r.inputFieldName||"file",params:{...r.params,...null==a?void 0:a.params},forceJsonResponse:r.forceJsonResponse,withCredentials:r.withCredentials,formatGroupParamName:r.formatGroupParamName,headers:null==a?void 0:a.headers,sendWithFormData:r.sendWithFormData,formatServerResponse:r.formatServerResponse,formDataAllowUndefined:r.formDataAllowUndefined},s)}},Object.values(h));return t};const re=Object(o.hasWindow)()&&"FileList"in window,oe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e;return Object(o.isProduction)()||(t<3&&s(e)?n=f(e):t<3&&u(e)&&(n=Array.isArray(e)?e.map(e=>oe(e,t+1)):Object.keys(e).reduce((n,r)=>(n[r]=oe(e[r],t+1),n),{}))),n};let ae=0;var ie=(e,t,n)=>{ae+=1;const r="batch-"+ae,a=(e=>re&&e instanceof FileList||"[object FileList]"===e.toString())(e);e=Array.isArray(e)||a?e:[e];const i=!n.autoUpload;return((e,t,n,r)=>Promise.all(Array.prototype.map.call(t,e=>{const t=(r||K)(e);return Object(o.isPromise)(t)?t.then(t=>!!t&&e):!!t&&e})).then(t=>t.filter(Boolean).map(t=>Object(o.createBatchItem)(t,e,n))))(r,e,i,n.fileFilter).then(e=>({id:r,uploaderId:t,items:e,state:i?o.BATCH_STATES.PENDING:o.BATCH_STATES.ADDED,completed:0,loaded:0,orgItemCount:e.length,additionalInfo:null}))};var se=(e,t,n,r)=>{const o=ne(),a=J(n,e,t,o,r);return{process:(e,t)=>{a.uploadBatch(e,t)},abortBatch:e=>{a.abortBatch(e)},abort:e=>{e?a.abortItem(e):a.abortAll()},addNewBatch:(e,t,n)=>ie(e,t,n).then(e=>a.addBatch(e,n)),runCancellable:a.runCancellable,clearPendingBatches:()=>{a.clearPendingBatches()},processPendingBatches:e=>{a.uploadPendingBatches(e)}}};const ue=Object.values(E);let ce=0;var de=e=>{ce+=1;const t="uploader-"+ce;let n=!1;const a={};o.logger.debugLog(`uploady.uploader: creating new instance (${t})`,{options:e,counter:ce});let i=(e=>{return{...ee,...e,destination:e&&e.destination?(t=e.destination,{params:{},...t}):null};var t})(e);const s=()=>{p.clearPendingBatches()};let{trigger:u,target:c}=Object(r.default)({id:t,update:e=>(i=Object(o.merge)({},i,e),c),add:(e,t)=>{const n=Object(o.merge)({},i,t);return n.clearPendingOnAdd&&s(),p.addNewBatch(e,c.id,n).then(e=>{let t;return e.items.length?t=p.runCancellable(E.BATCH_ADD,e,n).then(t=>{t?(e.state=o.BATCH_STATES.CANCELLED,d(E.BATCH_CANCEL,e)):(o.logger.debugLog(`uploady.uploader [${c.id}]: new items added - auto upload =\n                        ${String(n.autoUpload)}`,e.items),n.autoUpload&&p.process(e))}):o.logger.debugLog(`uploady.uploader: no items to add. batch ${e.id} is empty. check fileFilter if this isn't intended`),t})},upload:e=>{p.processPendingBatches(e)},abort:e=>{p.abort(e)},abortBatch:e=>{p.abortBatch(e)},getOptions:()=>Object(o.clone)(i),clearPending:s,registerExtension:(e,t)=>{Object(o.invariant)(n,"Uploady - uploader extensions can only be registered by enhancers"),Object(o.invariant)(!a[e],"Uploady - uploader extension by this name [%s] already exists",e),o.logger.debugLog("uploady.uploader: registering extension: "+e.toString(),t),a[e]=t},getExtension:e=>a[e]},ue,{canAddEvents:!1,canRemoveEvents:!1});const d=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const a=Object(r.createLifePack)(()=>n.map(oe));return u(e,a)},l=Object(o.triggerCancellable)(d);if(i.enhancer){n=!0;const e=i.enhancer(c,d);n=!1,c=e||c}const p=se(d,l,i,c.id);return Object(o.devFreeze)(c)};var le=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.reduce((e,t)=>t(e,...r)||e,e)}};t.default=de},Xsbf:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O})),n.d(t,"addLife",(function(){return O})),n.d(t,"isLE",(function(){return l})),n.d(t,"createLifePack",(function(){return v}));var r=n("mHo/");var o=Object(r.devFreeze)({allowRegisterNonExistent:!0,canAddEvents:!0,canRemoveEvents:!0,collectStats:!1});const a=(e,t)=>{if(!Object(r.isFunction)(e))throw new Error(`'${t}' is not a valid function`)},i=e=>void 0===e,s=Symbol.for("__le__"),u=Symbol.for("__le__pack__"),c=e=>e?e[s]:null,d=e=>{const t=c(e);if(!t)throw new Error("Didnt find LE internal object. Something very bad happened!");return t},l=e=>!!c(e),p=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a(n,"cb");const o=d(e);if(!o.options.allowRegisterNonExistent&&!~o.events.indexOf(t))throw new Error(`Cannot register for event ${t.toString()} that wasn't already defined (allowRegisterNonExistent = false)`);const i=o.registry[t]||[];return i.find(e=>e.cb===n)||(i.push({name:t,cb:n,once:r}),o.registry[t]=i),()=>A.call(e,t,n)},f=(e,t)=>{const n=d(e).registry;return t?n[t]?n[t].slice():[]:Object.values(n).flat()},g={on:function(e,t){return p(this,e,t)},once:function(e,t){return p(this,e,t,!0)},off:A,getEvents:function(){return d(this).events.slice()}},E=()=>Object.entries(g).reduce((e,t)=>{let[n,r]=t;return e[n]={value:r},e},{}),h={trigger:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const a=f(this,e);let s;if(a.length){var c;let t;1===n.length&&!0===(null===(c=n[0])||void 0===c?void 0:c[u])&&(t=n[0].resolve()),s=a.map(r=>{let o;return r.once&&m(this,e,r.cb),o=t?r.cb(...t):n.length?1===n.length?r.cb(n[0]):2===n.length?r.cb(n[0],n[1]):3===n.length?r.cb(n[0],n[1],n[2]):r.cb(...n):r.cb(),o}).filter(e=>!i(e)).map(e=>Object(r.isPromise)(e)?e:Promise.resolve(e))}return s&&(s.length?s:void 0)},addEvent:function(e){const t=d(this);if(!t.options.canAddEvents)throw new Error("Cannot add new events (canAddEvents = false)");if(~t.events.indexOf(e))throw new Error(`Event '${e}' already defined`);t.events.push(e)},removeEvent:function(e){const t=d(this);if(!t.options.canRemoveEvents)throw new Error("Cannot remove events (canRemoveEvents = false)");{const n=t.events.indexOf(e);t.events.splice(n,1)}},hasEvent:function(e){return!!~d(this).events.indexOf(e)},hasEventRegistrations:function(e){return!!f(this,e).length},assign:function(e){const t=d(this);return T(e,t.options,t.events,t.registry,t.stats),b(e)}},b=e=>Object.keys(h).reduce((t,n)=>(t[n]=h[n].bind(e),t),{target:e,...h}),S=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=d(e).registry;!r[t]||!n&&r[t].length||delete r[t]},m=(e,t,n)=>{const r=d(e).registry;r[t]&&(n?(r[t]=r[t].filter(e=>e.cb!==n),S(e,t)):S(e,t,!0))};function A(e,t){m(this,e,t)}const T=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};Object.defineProperties(e,{[s]:{value:Object.seal({registry:r,events:n,options:t,stats:o})},...E()})};var O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return e=e||{},n={...o,...n},l(e)||T(e,n,t),b(e)};var v=e=>{const t={resolve:()=>[].concat(e())};return Object.defineProperty(t,u,{value:!0,configurable:!1}),t}},cDcd:function(t,n){t.exports=e},faye:function(e,n){e.exports=t},h0aC:function(e,t,n){"use strict";n.r(t),n.d(t,"useBatchAddListener",(function(){return E})),n.d(t,"useBatchStartListener",(function(){return h})),n.d(t,"useBatchProgressListener",(function(){return O})),n.d(t,"useBatchFinishListener",(function(){return b})),n.d(t,"useBatchCancelledListener",(function(){return S})),n.d(t,"useBatchAbortListener",(function(){return T})),n.d(t,"useBatchErrorListener",(function(){return m})),n.d(t,"useBatchFinalizeListener",(function(){return A})),n.d(t,"useItemStartListener",(function(){return v})),n.d(t,"useItemFinishListener",(function(){return y})),n.d(t,"useItemProgressListener",(function(){return C})),n.d(t,"useItemCancelListener",(function(){return R})),n.d(t,"useItemErrorListener",(function(){return I})),n.d(t,"useItemAbortListener",(function(){return _})),n.d(t,"useItemFinalizeListener",(function(){return L})),n.d(t,"useRequestPreSend",(function(){return P})),n.d(t,"useAllAbortListener",(function(){return B})),n.d(t,"logWarning",(function(){return w})),n.d(t,"markAsUploadOptionsComponent",(function(){return j})),n.d(t,"getIsUploadOptionsComponent",(function(){return U})),n.d(t,"generateUploaderEventHook",(function(){return g})),n.d(t,"generateUploaderEventHookWithState",(function(){return f})),n.d(t,"getUploadyVersion",(function(){return s.c})),n.d(t,"NoDomUploady",(function(){return F})),n.d(t,"assertContext",(function(){return d})),n.d(t,"UploadyContext",(function(){return c})),n.d(t,"createContextApi",(function(){return u})),n.d(t,"useUploadOptions",(function(){return H})),n.d(t,"useAbortItem",(function(){return x})),n.d(t,"useAbortBatch",(function(){return q})),n.d(t,"useAbortAll",(function(){return M})),n.d(t,"useUploadyContext",(function(){return l})),n.d(t,"useUploady",(function(){return l})),n.d(t,"withRequestPreSendUpdate",(function(){return $})),n.d(t,"withBatchStartUpdate",(function(){return X}));var r=n("SXZu"),o=n("cDcd"),a=n.n(o),i=n("mHo/"),s=n("Lrr1");const u=(e,t)=>{let n,r,o=!1;t?n=t:i.logger.debugLog("Uploady context - didn't receive input field ref - waiting for external ref");const a=()=>{var e;return null===(e=n)||void 0===e?void 0:e.current},u=()=>{const e=a();Object(i.invariant)(e,"Uploady - Context. File input isn't available"),e.removeEventListener("change",u);const t=r;r=null,c(e.files,t)},c=(t,n)=>{e.add(t,n)};return Object(s.d)(),{hasUploader:()=>!!e,getInternalFileInput:()=>(n&&(o=!0),n),setExternalFileInput:e=>{o=!0,n=e},getIsUsingExternalInput:()=>o,showFileUpload:e=>{const t=a();Object(i.invariant)(t,"Uploady - Context. File input isn't available"),r=e,t.removeEventListener("change",u),t.addEventListener("change",u),t.value="",t.click()},upload:c,processPending:t=>{e.upload(t)},clearPending:()=>{e.clearPending()},setOptions:t=>{e.update(t)},getOptions:()=>e.getOptions(),getExtension:t=>e.getExtension(t),abort:t=>{e.abort(t)},abortBatch:t=>{e.abortBatch(t)},on:(t,n)=>e.on(t,n),once:(t,n)=>e.once(t,n),off:(t,n)=>e.off(t,n)}};var c=a.a.createContext(null);var d=e=>(Object(i.invariant)(!Object(s.a)(),"Uploady - Valid UploadyContext not found.\nYou may be using packages of different Uploady versions. <Uploady> and all other packages using the context provider must be of the same version: %s",Object(s.b)()),Object(i.invariant)(e&&e.hasUploader(),"Uploady - Valid UploadyContext not found. Make sure you render inside <Uploady>"),e);var l=()=>d(Object(o.useContext)(c));const p=(e,t)=>{const n=l(),{on:r,off:a}=n;Object(o.useEffect)(()=>(r(e,t),()=>{a(e,t)}),[e,t,r,a])},f=(e,t)=>(n,r)=>{const[a,s]=Object(o.useState)(null);n&&!Object(i.isFunction)(n)&&(r=n,n=void 0);const u=Object(o.useCallback)((function(e){if(!r||e.id===r){for(var o=arguments.length,a=new Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];s(t(e,...a)),Object(i.isFunction)(n)&&n(e,...a)}}),[n,r]);return p(e,u),a},g=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(n,r)=>{const a=Object(o.useCallback)((function(e){for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];return!n||t&&r&&e.id!==r?void 0:n(e,...a)}),[n,r]);p(e,a)}},E=g(r.UPLOADER_EVENTS.BATCH_ADD,!1),h=g(r.UPLOADER_EVENTS.BATCH_START),b=g(r.UPLOADER_EVENTS.BATCH_FINISH),S=g(r.UPLOADER_EVENTS.BATCH_CANCEL),m=g(r.UPLOADER_EVENTS.BATCH_ERROR),A=g(r.UPLOADER_EVENTS.BATCH_FINALIZE),T=g(r.UPLOADER_EVENTS.BATCH_ABORT),O=f(r.UPLOADER_EVENTS.BATCH_PROGRESS,e=>({...e})),v=g(r.UPLOADER_EVENTS.ITEM_START),y=g(r.UPLOADER_EVENTS.ITEM_FINISH),R=g(r.UPLOADER_EVENTS.ITEM_CANCEL),I=g(r.UPLOADER_EVENTS.ITEM_ERROR),_=g(r.UPLOADER_EVENTS.ITEM_ABORT),L=g(r.UPLOADER_EVENTS.ITEM_FINALIZE),C=f(r.UPLOADER_EVENTS.ITEM_PROGRESS,e=>({...e})),P=g(r.UPLOADER_EVENTS.REQUEST_PRE_SEND,!1),B=g(r.UPLOADER_EVENTS.ALL_ABORT,!1),D=Symbol.for("rpldy_component"),w=(e,t)=>{Object(i.isProduction)()||e||console.warn(t)},j=e=>{e[D]=!0},U=e=>{var t,n;return!0===e[D]||!0===(null===(t=e.target)||void 0===t?void 0:t[D])||!0===(null===(n=e.render)||void 0===n?void 0:n[D])};var N=(e,t)=>{const n=Object(o.useMemo)(()=>(i.logger.debugLog("Uploady creating a new uploader instance",e),Object(r.default)(e)),[e.enhancer]);return n.update(e),Object(o.useEffect)(()=>(t&&(i.logger.debugLog("Uploady setting event listeners",t),Object.entries(t).forEach(e=>{let[t,r]=e;n.on(t,r)})),()=>{t&&(i.logger.debugLog("Uploady removing event listeners",t),Object.entries(t).forEach(e=>{let[t,r]=e;return n.off(t,r)}))}),[t,n]),n};var F=e=>{const{listeners:t,debug:n,children:r,inputRef:s,...d}=e;i.logger.setDebug(!!n),i.logger.debugLog("@@@@@@ Uploady Rendering @@@@@@",e);const l=N(d,t),p=Object(o.useMemo)(()=>u(l,s),[l,s]);return a.a.createElement(c.Provider,{value:p},r)};var H=e=>{const t=l();return e&&t.setOptions(e),t.getOptions()};var x=()=>{const e=l();return Object(o.useCallback)(t=>e.abort(t),[e])};var q=()=>{const e=l();return Object(o.useCallback)(t=>e.abortBatch(t),[e])};var M=()=>{const e=l();return Object(o.useCallback)(()=>e.abort(),[e])},G=n("EcSs"),k=n.n(G);const V=e=>{let{eventType:t,getIsValidEventData:n,getRequestData:r}=e;return e=>i=>{const s=l(),[u,c]=Object(o.useState)({updateRequest:null,requestData:null}),{id:d}=i;return Object(o.useLayoutEffect)(()=>{const e=function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return!0===n(d,...a)?new Promise(n=>{c({updateRequest:r=>{s.off(t,e),n(r)},requestData:r(...a)})}):void 0};return d&&s.on(t,e),()=>{d&&s.off(t,e)}},[s,d]),a.a.createElement(e,k()({},i,u))}};var $=V({eventType:r.UPLOADER_EVENTS.REQUEST_PRE_SEND,getIsValidEventData:(e,t)=>{let{items:n}=t;return!!n.find(t=>t.id===e)},getRequestData:e=>{let{items:t,options:n}=e;return{items:t,options:n}}});var X=V({eventType:r.UPLOADER_EVENTS.BATCH_START,getIsValidEventData:(e,t)=>t.id===e,getRequestData:(e,t)=>({batch:e,items:e.items,options:t})})},lFlW:function(e,t,n){"use strict";n.r(t),n.d(t,"useFileInput",(function(){return E})),n.d(t,"Uploady",(function(){return f})),n.d(t,"UPLOADER_EVENTS",(function(){return h.UPLOADER_EVENTS})),n.d(t,"DEFAULT_OPTIONS",(function(){return h.DEFAULT_OPTIONS})),n.d(t,"composeEnhancers",(function(){return h.composeEnhancers})),n.d(t,"createUploader",(function(){return h.createUploader})),n.d(t,"send",(function(){return h.send})),n.d(t,"getXhrSend",(function(){return h.getXhrSend})),n.d(t,"XHR_SENDER_TYPE",(function(){return h.XHR_SENDER_TYPE})),n.d(t,"MissingUrlError",(function(){return h.MissingUrlError})),n.d(t,"FILE_STATES",(function(){return h.FILE_STATES})),n.d(t,"BATCH_STATES",(function(){return h.BATCH_STATES})),n.d(t,"useBatchAddListener",(function(){return d.useBatchAddListener})),n.d(t,"useBatchStartListener",(function(){return d.useBatchStartListener})),n.d(t,"useBatchProgressListener",(function(){return d.useBatchProgressListener})),n.d(t,"useBatchFinishListener",(function(){return d.useBatchFinishListener})),n.d(t,"useBatchCancelledListener",(function(){return d.useBatchCancelledListener})),n.d(t,"useBatchAbortListener",(function(){return d.useBatchAbortListener})),n.d(t,"useBatchErrorListener",(function(){return d.useBatchErrorListener})),n.d(t,"useBatchFinalizeListener",(function(){return d.useBatchFinalizeListener})),n.d(t,"useItemStartListener",(function(){return d.useItemStartListener})),n.d(t,"useItemFinishListener",(function(){return d.useItemFinishListener})),n.d(t,"useItemProgressListener",(function(){return d.useItemProgressListener})),n.d(t,"useItemCancelListener",(function(){return d.useItemCancelListener})),n.d(t,"useItemErrorListener",(function(){return d.useItemErrorListener})),n.d(t,"useItemAbortListener",(function(){return d.useItemAbortListener})),n.d(t,"useItemFinalizeListener",(function(){return d.useItemFinalizeListener})),n.d(t,"useRequestPreSend",(function(){return d.useRequestPreSend})),n.d(t,"useAllAbortListener",(function(){return d.useAllAbortListener})),n.d(t,"logWarning",(function(){return d.logWarning})),n.d(t,"markAsUploadOptionsComponent",(function(){return d.markAsUploadOptionsComponent})),n.d(t,"getIsUploadOptionsComponent",(function(){return d.getIsUploadOptionsComponent})),n.d(t,"generateUploaderEventHook",(function(){return d.generateUploaderEventHook})),n.d(t,"generateUploaderEventHookWithState",(function(){return d.generateUploaderEventHookWithState})),n.d(t,"getUploadyVersion",(function(){return d.getUploadyVersion})),n.d(t,"NoDomUploady",(function(){return d.NoDomUploady})),n.d(t,"assertContext",(function(){return d.assertContext})),n.d(t,"UploadyContext",(function(){return d.UploadyContext})),n.d(t,"createContextApi",(function(){return d.createContextApi})),n.d(t,"useUploadOptions",(function(){return d.useUploadOptions})),n.d(t,"useAbortItem",(function(){return d.useAbortItem})),n.d(t,"useAbortBatch",(function(){return d.useAbortBatch})),n.d(t,"useAbortAll",(function(){return d.useAbortAll})),n.d(t,"useUploadyContext",(function(){return d.useUploadyContext})),n.d(t,"useUploady",(function(){return d.useUploady})),n.d(t,"withRequestPreSendUpdate",(function(){return d.withRequestPreSendUpdate})),n.d(t,"withBatchStartUpdate",(function(){return d.withBatchStartUpdate}));var r=n("EcSs"),o=n.n(r),a=n("cDcd"),i=n.n(a),s=n("faye"),u=n.n(s),c=n("mHo/"),d=n("h0aC");const l=(e,t,n)=>i.a.createElement("input",o()({},e,{name:t.inputFieldName,type:"file",ref:n})),p=Object(a.memo)(Object(a.forwardRef)((e,t)=>{let{container:n,noPortal:r,...o}=e;const a=Object(d.useUploadOptions)(),i=n&&1===n.nodeType;return Object(c.invariant)(i||!Object(c.hasWindow)(),"Uploady - Container for file input must be a valid dom element"),r?l(o,a,t):((e,t,n,r,o)=>e&&t?u.a.createPortal(l(n,r,o),e):null)(n,i,o,a,t)}));var f=e=>{const{multiple:t=!0,capture:n,accept:r,webkitdirectory:s,children:u,inputFieldContainer:l,customInput:f,fileInputId:g,noPortal:E=!1,...h}=e,b=f?null:l||(Object(c.hasWindow)()?document.body:null),S=Object(a.useRef)();return i.a.createElement(d.NoDomUploady,o()({},h,{inputRef:S}),f?null:i.a.createElement(p,{container:b,multiple:t,capture:n,accept:r,webkitdirectory:s,style:{display:"none"},ref:S,id:g,noPortal:E}),u)};const g=e=>{const t=e.closest("form");let n={filesParamName:e.getAttribute("name"),method:void 0,url:void 0};if(t){const e=t.getAttribute("method"),r=(e=>{const t=window.location;let n,r=e.getAttribute("action")||"";switch(r=r.replace(/\s/g,""),!0){case""===r:r=t.href;break;case r.startsWith("/"):r=`${t.protocol}//${t.host}${r}`;break;case!/:\/\//.test(r):n=t.pathname.split("/").slice(0,-1).concat("").join("/"),r=`${t.protocol}//${t.host}${n}${r}`}return r})(t);n.method=e?e.toUpperCase():void 0,n.url=r,c.logger.debugLog(`Uploady.useFileInput: using custom input's parent form url ${n.url} and method ${n.method||""}`)}return n};var E=e=>{const t=Object(d.useUploadyContext)();return e&&t.setExternalFileInput(e),Object(a.useEffect)(()=>{if(null!=e&&e.current&&"closest"in e.current){const n=e.current,r=t.getOptions();if(!r.destination||!r.destination.url){const e=g(n);t.setOptions({destination:e})}}},[e,t]),e||t.getInternalFileInput()},h=n("SXZu");t.default=f},"mHo/":function(e,t,n){"use strict";n.r(t),n.d(t,"BATCH_STATES",(function(){return u})),n.d(t,"FILE_STATES",(function(){return c})),n.d(t,"invariant",(function(){return a.a})),n.d(t,"throttle",(function(){return s.a})),n.d(t,"logger",(function(){return r})),n.d(t,"triggerCancellable",(function(){return E})),n.d(t,"triggerUpdater",(function(){return b})),n.d(t,"createBatchItem",(function(){return v})),n.d(t,"request",(function(){return I})),n.d(t,"parseResponseHeaders",(function(){return R})),n.d(t,"isFunction",(function(){return L.a})),n.d(t,"isPlainObject",(function(){return w})),n.d(t,"isSamePropInArrays",(function(){return C})),n.d(t,"devFreeze",(function(){return D})),n.d(t,"merge",(function(){return F})),n.d(t,"getMerge",(function(){return N})),n.d(t,"clone",(function(){return H})),n.d(t,"pick",(function(){return x})),n.d(t,"hasWindow",(function(){return d})),n.d(t,"isProduction",(function(){return B.a})),n.d(t,"isPromise",(function(){return q}));var r={};n.r(r),n.d(r,"isDebugOn",(function(){return p})),n.d(r,"setDebug",(function(){return f})),n.d(r,"debugLog",(function(){return g}));var o=n("kvau"),a=n.n(o),i=n("uDTZ"),s=n.n(i);const u={PENDING:"pending",ADDED:"added",PROCESSING:"processing",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ABORTED:"aborted",ERROR:"error"},c={PENDING:"pending",ADDED:"added",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ERROR:"error",ABORTED:"aborted"};var d=()=>"object"==typeof window&&!!window.document;let l;const p=()=>("boolean"!=typeof l&&(l=d()&&("location"in window&&!!~window.location.search.indexOf("rpldy_debug=true")||!0===window["__rpldy-logger-debug__"])),!!l),f=e=>{d()&&(window["__rpldy-logger-debug__"]=e),l=!!e||null},g=function(){p()&&console.log(...arguments)};var E=function(e,t){const n=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new Promise((n,o)=>{const a=e(t,...r);a&&a.length?Promise.all(a).catch(o).then(e=>e&&n(!!~e.findIndex(e=>!1===e))):n(!1)})};for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return t?n(t,...o):n};const h=e=>null==e;var b=function(e,t){const n=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new Promise((n,o)=>{const a=e(t,...r);a&&a.length?Promise.all(a).catch(o).then(e=>{let t;if(e)for(;h(t)&&e.length;)t=e.pop();n(h(t)?void 0:t)}):n()})};for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return t?n(t,...o):n};const S=Symbol.for("__rpldy-bi__");let m=0;const A=(e,t)=>(e.url=t,e),T=(e,t)=>(e.file=t,e),O=e=>e&&(e instanceof File||e instanceof Blob||"object"==typeof e&&e.name&&e.type);var v=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];m+=e.id&&e.batchId?0:1;const r=e.id&&e.batchId?e.id:`${t}.item-${m}`,o=n?c.PENDING:c.ADDED;let a={id:r,batchId:t,state:o,uploadStatus:0,completed:0,loaded:0,recycled:!1,previousBatch:null};if(Object.defineProperty(a,S,{value:!0,writable:!0}),"object"==typeof e&&!0===e[S]&&(a.recycled=!0,a.previousBatch=e.batchId,e=e.file||e.url),"string"==typeof e)a=A(a,e);else{if(!O(e))throw new Error("Unknown type of file added: "+typeof e);a=T(a,e)}return a};const y=(e,t)=>{t&&Object.keys(t).forEach(n=>{void 0!==t[n]&&e.setRequestHeader(n,t[n])})};var R=e=>{let t;try{t=e.getAllResponseHeaders().trim().split(/[\r\n]+/).reduce((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e},{})}catch(t){g("uploady.request: failed to read response headers",e)}return t},I=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new XMLHttpRequest,o=new Promise((o,a)=>{r.onerror=()=>a(r),r.ontimeout=()=>a(r),r.onabort=()=>a(r),r.onload=()=>o(r),r.open(n.method||"GET",e),y(r,n.headers),r.withCredentials=!!n.withCredentials,n.preSend&&n.preSend(r),r.send(t)});return o.xhr=r,o},_=n("r5yn"),L=n.n(_);var C=(e,t,n)=>{let r=!0;const o=(e=>{const t=[].concat(e);return e=>e.map(e=>t.map(t=>e[t]).join())})(n);if(e&&t&&e.length===t.length){const n=o(e),a=o(t);r=!!n.find((e,t)=>e!==a[t])}return!r},P=n("DVTP"),B=n.n(P);var D=e=>B()()?e:Object.freeze(e);var w=e=>{var t;return!!e&&"object"==typeof e&&("Object"===(null===(t=Object.getPrototypeOf(e))||void 0===t?void 0:t.constructor.name)||null===Object.getPrototypeOf(e))};const j=e=>w(e)||Array.isArray(e),U=(e,t)=>{const n=Object.keys(e);return t.withSymbols?n.concat(Object.getOwnPropertySymbols(e)):n},N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return n&&o.length&&o.forEach(r=>{r&&U(r,e).forEach(o=>{const a=r[o];e.predicate&&!e.predicate(o,a)||(void 0!==a||e.undefinedOverwrites)&&(j(a)?(void 0!==n[o]&&w(n[o])||(n[o]=Array.isArray(a)?[]:{}),t(n[o],a)):n[o]=a)})}),n};return t};var F=N();var H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F;return j(e)?t(Array.isArray(e)?[]:{},e):e};var x=(e,t)=>e&&Object.keys(e).reduce((n,r)=>(~t.indexOf(r)&&(n[r]=e[r]),n),{});var q=e=>!!e&&"object"==typeof e&&"function"==typeof e.then},r5yn:function(e,t){e.exports=function(e){return"function"==typeof e}}})}));
//# sourceMappingURL=rpldy-ui-core.umd.min.js.map